<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tome Blog</title>
    <link rel="stylesheet" type ="text/css" href="{{ url_for('static', filename = 'style.css')}}">
</head>
<body>
    

    <header class="topnav">
        
        <!-- Everyone gets these  -->        
        <a href = "{{ url_for('home') }}">Home</a>
        <a href = "{{ url_for('home_blogs') }}"> Tome Blogs </a> 
        
        <a href = "{{ url_for('home_profile') }}" class = "split"> Profile </a>

        <!-- Everyone who is signed in gets these -->
        {% if current_user.is_authenticated %}

            <a href = "{{ url_for('logout') }}" class = "split"> Log out</a>

            <!-- Only Admin users can access these -->
            {% if current_user.Is_Admin %}
                 
                <a href = "{{  url_for('home_createBlog') }}"> Start New Topic </a>
                <a href = " {{ url_for('admin') }}"> Admin View </a>

            {% endif %} 

        {% else %}

            <!-- If NOT authenticated-->
            <a href = "{{ url_for('login') }}" class = "split"> Log in </a>
            <a href = "{{ url_for('signup') }}"class = "split"> Sign up </a>

        {% endif %}
        
    </header>

    <hr>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert" style="position: relative; background: rgba(199, 97, 1, 0.938); padding: 15px; margin-bottom: 10px; color: black;">
                    {{ message }}
                    <button type="button" 
                            onclick="this.parentElement.remove()" 
                            style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 20px; cursor: pointer; color: black;">
                        &times;
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

<script> //Close the message after 5 seconds.

setTimeout(function() {

    const alerts = document.querySelectorAll('.alert');

    alerts.forEach(alert => {
        alert.style.transition = 'opacity 0.5s';
        alert.style.opacity = '0';
        setTimeout(() => alert.remove(), 500);

    });

}, 5000);

</script>

    {% block content %} {% endblock %}

</body>
</html>